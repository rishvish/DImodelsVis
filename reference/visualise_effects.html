<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Effects plot for compositional data — visualise_effects • DImodelsVis</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Effects plot for compositional data — visualise_effects"><meta name="description" content="This function will prepare the underlying data and plot the results for visualising
the effect of increasing or decreasing the proportion of a predictor variable
(from a set of compositional variables). The generated plot will
show a curve for each observation (whenever possible) in the data.
Pie-glyphs are
used to highlight the compositions of the specified communities and the ending
community after the variable interest either completes dominates the community
(when looking at the effect of increase) or completely vanishes from the community
(when looking at the effect of decrease) or both.
This is a wrapper function specifically for statistical models fit using the
DI() function from the
DImodels R package and would implicitly
call visualise_effects_data followed by
visualise_effects_plot. If your model object isn't fit using
DImodels, users can call the data and plot functions manually, one by one."><meta property="og:description" content="This function will prepare the underlying data and plot the results for visualising
the effect of increasing or decreasing the proportion of a predictor variable
(from a set of compositional variables). The generated plot will
show a curve for each observation (whenever possible) in the data.
Pie-glyphs are
used to highlight the compositions of the specified communities and the ending
community after the variable interest either completes dominates the community
(when looking at the effect of increase) or completely vanishes from the community
(when looking at the effect of decrease) or both.
This is a wrapper function specifically for statistical models fit using the
DI() function from the
DImodels R package and would implicitly
call visualise_effects_data followed by
visualise_effects_plot. If your model object isn't fit using
DImodels, users can call the data and plot functions manually, one by one."><meta property="og:image" content="https://rishvish.github.io/DImodelsVis/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DImodelsVis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/DImodelsVis-with-complex-models.html">Using DImodelsVis with regression models not fit using the DImodels package</a></li>
    <li><a class="dropdown-item" href="../articles/DImodelsVis-with-DImodelsMulti-models.html">Using DImodelsVis with regression models fit using the `DImodelsMulti` R package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Effects plot for compositional data</h1>

      <div class="d-none name"><code>visualise_effects.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will prepare the underlying data and plot the results for visualising
the effect of increasing or decreasing the proportion of a predictor variable
(from a set of compositional variables). The generated plot will
show a curve for each observation (whenever possible) in the data.
<code><a href="https://rishvish.github.io/PieGlyph/reference/PieGlyph-package.html" class="external-link">Pie-glyphs</a></code> are
used to highlight the compositions of the specified communities and the ending
community after the variable interest either completes dominates the community
(when looking at the effect of increase) or completely vanishes from the community
(when looking at the effect of decrease) or both.
This is a wrapper function specifically for statistical models fit using the
<code><a href="https://rdrr.io/pkg/DImodels/man/DI.html" class="external-link">DI()</a></code> function from the
<code><a href="https://rdrr.io/pkg/DImodels/man/DImodels-package.html" class="external-link">DImodels</a></code> R package and would implicitly
call <code><a href="visualise_effects_data.html">visualise_effects_data</a></code> followed by
<code><a href="visualise_effects_plot.html">visualise_effects_plot</a></code>. If your model object isn't fit using
DImodels, users can call the data and plot functions manually, one by one.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">visualise_effects</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var_interest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"increase"</span>, <span class="st">"decrease"</span>, <span class="st">"both"</span><span class="op">)</span>,</span>
<span>  add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"confidence"</span>, <span class="st">"prediction"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  conf.level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  average <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pie_colours <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pie_radius <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  FG <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nrow <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>A Diversity Interactions model object fit by using the
`<code><a href="https://rdrr.io/pkg/DImodels/man/DI.html" class="external-link">DI()</a></code>` function from the
`<code><a href="https://rdrr.io/pkg/DImodels/man/DImodels-package.html" class="external-link">DImodels</a></code>` package.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A dataframe specifying communities of interest for which user
wants visualise the effect of species decrease or increase.
If left blank, the communities from the original data used
to fit the model would be selected.</p></dd>


<dt id="arg-var-interest">var_interest<a class="anchor" aria-label="anchor" href="#arg-var-interest"></a></dt>
<dd><p>A character vector specifying the variable for which to visualise
the effect of change on the response. If left blank,
all variables would be assumed to be of interest.</p></dd>


<dt id="arg-effect">effect<a class="anchor" aria-label="anchor" href="#arg-effect"></a></dt>
<dd><p>One of "increase", "decrease" or "both" to indicate whether to
look at the effect of increasing the proportion, decreasing the
proportion or doing both simultaneously, respectively on the response.
The default in "increasing".</p></dd>


<dt id="arg-add-var">add_var<a class="anchor" aria-label="anchor" href="#arg-add-var"></a></dt>
<dd><p>A list specifying values for additional variables
in the model other than the proportions (i.e. not part of the simplex design).
This would be useful to compare the predictions across
different values for a categorical variable.
One plot will be generated for each unique combination
of values specified here.</p></dd>


<dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p>Type of interval to calculate:</p><dl><dt>"none"</dt>
<dd><p>No interval to be calculated.</p></dd>

  <dt>"confidence" (default)</dt>
<dd><p>Calculate a confidence interval.</p></dd>

  <dt>"prediction"</dt>
<dd><p>Calculate a prediction interval.</p></dd>


</dl></dd>


<dt id="arg-conf-level">conf.level<a class="anchor" aria-label="anchor" href="#arg-conf-level"></a></dt>
<dd><p>The confidence level for calculating confidence/prediction
intervals. Default is 0.95.</p></dd>


<dt id="arg-se">se<a class="anchor" aria-label="anchor" href="#arg-se"></a></dt>
<dd><p>A boolean variable indicating whether to plot confidence intervals associated with
the effect of species increase or decrease</p></dd>


<dt id="arg-average">average<a class="anchor" aria-label="anchor" href="#arg-average"></a></dt>
<dd><p>A boolean value indicating whether to add a line describing the "average"
effect of variable increase or decrease. The average is calculated at the
median value of any variables not specified.</p></dd>


<dt id="arg-pie-colours">pie_colours<a class="anchor" aria-label="anchor" href="#arg-pie-colours"></a></dt>
<dd><p>A character vector indicating the colours for the slices
in the pie-glyphs. <br>
If left NULL, the colour blind friendly colours will be
for the pie-glyph slices.</p></dd>


<dt id="arg-pie-radius">pie_radius<a class="anchor" aria-label="anchor" href="#arg-pie-radius"></a></dt>
<dd><p>A numeric value specifying the radius (in cm) for the
pie-glyphs. Default is 0.3 cm.</p></dd>


<dt id="arg-fg">FG<a class="anchor" aria-label="anchor" href="#arg-fg"></a></dt>
<dd><p>A higher level grouping for the compositional variables in the
data. Variables belonging to the same group will be assigned with
different shades of the same colour. The user can manually specify
a character vector giving the group each variable belongs to.
If left empty the function will try to get a grouping
from the original <code><a href="https://rdrr.io/pkg/DImodels/man/DI.html" class="external-link">DI</a></code> model object.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>A boolean variable indicating whether to create the plot or return
the prepared data instead. The default `TRUE` creates the plot while
`FALSE` would return the prepared data for plotting. Could be useful
for if user wants to modify the data first and then call the plotting
function manually.</p></dd>


<dt id="arg-nrow">nrow<a class="anchor" aria-label="anchor" href="#arg-nrow"></a></dt>
<dd><p>Number of rows in which to arrange the final plot
(when `add_var` is specified).</p></dd>


<dt id="arg-ncol">ncol<a class="anchor" aria-label="anchor" href="#arg-ncol"></a></dt>
<dd><p>Number of columns in which to arrange the final plot
(when `add_var` is specified).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggmultiplot (ggplot if single plot is returned) class object or data-frame (if `plot = FALSE`)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">DImodels</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Fit model</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/DImodels/man/DI.html" class="external-link">DI</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">6</span>, DImodel <span class="op">=</span> <span class="st">"AV"</span>, data <span class="op">=</span> <span class="va">sim1</span>, y <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitted model: Average interactions 'AV' DImodel</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get effects plot for all species in design</span></span></span>
<span class="r-in"><span><span class="fu">visualise_effects</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `var_interest` was not specified. Assuming all variables are of interest.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="visualise_effects-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Choose a variable of interest using `var_interest`</span></span></span>
<span class="r-in"><span><span class="fu">visualise_effects</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, var_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="visualise_effects-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Add custom communities to plot instead of design communities</span></span></span>
<span class="r-in"><span><span class="co">## Any variable not specified will be assumed to be 0</span></span></span>
<span class="r-in"><span><span class="co">## Not showing the average curve using `average = FALSE`</span></span></span>
<span class="r-in"><span><span class="fu">visualise_effects</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, average <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"p1"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p3"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,   <span class="fl">0.4</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  var_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p2"</span>, <span class="st">"p3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> The variable <span style="color: #0000BB;">"p4"</span> was not present in the data specified, assuming their</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   proportions to be 0.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="visualise_effects-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Add uncertainty on plot</span></span></span>
<span class="r-in"><span><span class="fu">visualise_effects</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, average <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"p1"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p3"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,   <span class="fl">0.4</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  var_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p2"</span>, <span class="st">"p3"</span><span class="op">)</span>, se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> The variable <span style="color: #0000BB;">"p4"</span> was not present in the data specified, assuming their</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   proportions to be 0.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="visualise_effects-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Visualise effect of species decrease for particular species</span></span></span>
<span class="r-in"><span><span class="co">## Show a 99% confidence interval using `conf.level`</span></span></span>
<span class="r-in"><span><span class="fu">visualise_effects</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, effect <span class="op">=</span> <span class="st">"decrease"</span>,</span></span>
<span class="r-in"><span>                  average <span class="op">=</span> <span class="cn">TRUE</span>, se <span class="op">=</span> <span class="cn">TRUE</span>, conf.level <span class="op">=</span> <span class="fl">0.99</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"p1"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p3"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,   <span class="fl">0.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p4"</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  var_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="visualise_effects-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Show effects of both increase and decrease using `effect = "both"`</span></span></span>
<span class="r-in"><span><span class="co">## and change colours of pie-glyphs using `pie_colours`</span></span></span>
<span class="r-in"><span><span class="fu">visualise_effects</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, effect <span class="op">=</span> <span class="st">"both"</span>,</span></span>
<span class="r-in"><span>                  average <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                  pie_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"steelblue1"</span>, <span class="st">"steelblue4"</span>, <span class="st">"orange1"</span>, <span class="st">"orange4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"p1"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p3"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,   <span class="fl">0.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p4"</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  var_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="visualise_effects-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add additional variables and create a separate plot for each</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu">visualise_effects</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, effect <span class="op">=</span> <span class="st">"both"</span>,</span></span>
<span class="r-in"><span>                  average <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                  pie_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"steelblue1"</span>, <span class="st">"steelblue4"</span>, <span class="st">"orange1"</span>, <span class="st">"orange4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"p1"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p3"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,   <span class="fl">0.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"p4"</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  var_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"block"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created all plots.</span>
<span class="r-plt img"><img src="visualise_effects-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Specify `plot = FALSE` to not create the plot but return the prepared data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">visualise_effects</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, effect <span class="op">=</span> <span class="st">"both"</span>,</span></span>
<span class="r-in"><span>                       average <span class="op">=</span> <span class="cn">FALSE</span>, plot <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       pie_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"steelblue1"</span>, <span class="st">"steelblue4"</span>,</span></span>
<span class="r-in"><span>                                       <span class="st">"orange1"</span>, <span class="st">"orange4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"p1"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                         <span class="st">"p2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                         <span class="st">"p3"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,   <span class="fl">0.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                         <span class="st">"p4"</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       var_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p3"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      p1    p2 p3 p4 .Sp .Proportion .Group    .Pred   .Lower   .Upper .Marginal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 1.000  0  0  p1       0.000      1 10.39773 9.297929 11.49753 0.9694331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.014 0.986  0  0  p1       0.014      1 10.41130 9.341016 11.48159 0.9519870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.028 0.972  0  0  p1       0.028      1 10.42463 9.382816 11.46645 0.9345409</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.042 0.958  0  0  p1       0.042      1 10.43771 9.423328 11.45210 0.9170948</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.056 0.944  0  0  p1       0.056      1 10.45055 9.462555 11.43855 0.8996487</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.070 0.930  0  0  p1       0.070      1 10.46315 9.500501 11.42580 0.8822026</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .Threshold .MarEffect .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      0.784   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      0.784   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      0.784   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      0.784   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      0.784   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      0.784   Negative    both</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rishabh Vishwakarma, Caroline Brophy, Laura Byrne, Catherine Hurley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

