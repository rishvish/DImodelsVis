<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Grouped ternary diagrams — grouped_ternary_data • DImodelsVis</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Grouped ternary diagrams — grouped_ternary_data"><meta name="description" content="The helper function for preparing the underlying data for creating grouped
ternary diagrams where the proportions of the compositional variables
are combined into groups and visualised on a ternary diagram.
These are very useful when we have multiple compositional variables that can
be grouped together by some hierarchical grouping structure. For example, grouping
species in a ecosystem based on the functions they perform, or grouping
political parties based on their national alliances. Grouping variables this
way allows us to reduce the dimensionality of the compositional data and
visualise it. This is akin to looking at a 2-d slice of the high
dimensional simplex. The relative proportions of each variable within a group
can be adjust to look at different slices of the simplex. Looking at multiple
such slices would enable us to create an approximation of how the response varies
across the original n-dimensional simplex. The output of this function can be passed to the
grouped_ternary_plot function to plot the results."><meta property="og:description" content="The helper function for preparing the underlying data for creating grouped
ternary diagrams where the proportions of the compositional variables
are combined into groups and visualised on a ternary diagram.
These are very useful when we have multiple compositional variables that can
be grouped together by some hierarchical grouping structure. For example, grouping
species in a ecosystem based on the functions they perform, or grouping
political parties based on their national alliances. Grouping variables this
way allows us to reduce the dimensionality of the compositional data and
visualise it. This is akin to looking at a 2-d slice of the high
dimensional simplex. The relative proportions of each variable within a group
can be adjust to look at different slices of the simplex. Looking at multiple
such slices would enable us to create an approximation of how the response varies
across the original n-dimensional simplex. The output of this function can be passed to the
grouped_ternary_plot function to plot the results."><meta property="og:image" content="https://rishvish.github.io/DImodelsVis/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DImodelsVis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/DImodelsVis-with-complex-models.html">Using DImodelsVis with regression models not fit using the DImodels package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Grouped ternary diagrams</h1>

      <div class="d-none name"><code>grouped_ternary_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The helper function for preparing the underlying data for creating grouped
ternary diagrams where the proportions of the compositional variables
are combined into groups and visualised on a ternary diagram.
These are very useful when we have multiple compositional variables that can
be grouped together by some hierarchical grouping structure. For example, grouping
species in a ecosystem based on the functions they perform, or grouping
political parties based on their national alliances. Grouping variables this
way allows us to reduce the dimensionality of the compositional data and
visualise it. This is akin to looking at a 2-d slice of the high
dimensional simplex. The relative proportions of each variable within a group
can be adjust to look at different slices of the simplex. Looking at multiple
such slices would enable us to create an approximation of how the response varies
across the original n-dimensional simplex. The output of this function can be passed to the
<code><a href="grouped_ternary_plot.html">grouped_ternary_plot</a></code> function to plot the results.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">grouped_ternary_data</span><span class="op">(</span></span>
<span>  <span class="va">prop</span>,</span>
<span>  <span class="va">FG</span>,</span>
<span>  values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tern_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conditional <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  prediction <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-prop">prop<a class="anchor" aria-label="anchor" href="#arg-prop"></a></dt>
<dd><p>A character vector indicating the model coefficients
corresponding to variable proportions. These variables should
be compositional in nature (i.e., proportions should sum to 1).</p></dd>


<dt id="arg-fg">FG<a class="anchor" aria-label="anchor" href="#arg-fg"></a></dt>
<dd><p>A character vector specifying the groupings of the variables specified in `prop`.</p></dd>


<dt id="arg-values">values<a class="anchor" aria-label="anchor" href="#arg-values"></a></dt>
<dd><p>A numeric vector specifying the proportional split of the variables within a group.
The default is to split the group proportion equally between
each variable in the group.</p></dd>


<dt id="arg-tern-vars">tern_vars<a class="anchor" aria-label="anchor" href="#arg-tern-vars"></a></dt>
<dd><p>A character vector giving the names of the three variables
to be shown in the ternary diagram.</p></dd>


<dt id="arg-conditional">conditional<a class="anchor" aria-label="anchor" href="#arg-conditional"></a></dt>
<dd><p>A data-frame describing the names of the compositional variables
and their respective values at which to slice the
simplex space. The format should be, for example, as follows: <br><code>data.frame("p1" = c(0, 0.5), "p2" = c(0.2, 0.1))</code> <br>
One figure would be created for each row in `conditional` with
the respective values of all specified variables. Any
compositional variables not specified in `conditional` will
be assumed to be 0.</p></dd>


<dt id="arg-add-var">add_var<a class="anchor" aria-label="anchor" href="#arg-add-var"></a></dt>
<dd><p>A list or data-frame specifying values for additional variables
in the model other than the proportions (i.e. not part of the
simplex design).
This could be useful for comparing the predictions across
different values for a non-compositional variable.
If specified as a list, it will be expanded to show a plot
for each unique combination of values specified, while if specified
as a data-frame, one plot would be generated for each row in the
data.</p></dd>


<dt id="arg-resolution">resolution<a class="anchor" aria-label="anchor" href="#arg-resolution"></a></dt>
<dd><p>A number between 1 and 10 describing the resolution of the
resultant graph.
A high value would result in a higher definition figure
but at the cost of being computationally expensive.</p></dd>


<dt id="arg-prediction">prediction<a class="anchor" aria-label="anchor" href="#arg-prediction"></a></dt>
<dd><p>A logical value indicating whether to pass the final data
to the `<a href="add_prediction.html">add_prediction</a>` function and append the
predictions to the data. Default value is <code>TRUE</code>, but
often it would be desirable to make additional changes to
the data before making any predictions, so the user can set this to
<code>FALSE</code> and manually call the `<a href="add_prediction.html">add_prediction</a>`
function.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="add_prediction.html">add_prediction</a></code></p><dl><dt><code>model</code></dt>
<dd><p>A regression model object which will be used to make predictions
for the observations in `data`. Will override `coefficients`
if specified.</p></dd>

    <dt><code>coefficients</code></dt>
<dd><p>If a regression model is not available (or can't be fit in R),
the regression coefficients from a model fit in some other
language can be used to calculate predictions. However, the
user would have to ensure there's an appropriate one-to-one
positional mapping between the data columns and the
coefficient values. Further, they would also have to provide
a variance-covariance matrix of the coefficients in the `vcov`
parameter if they want the associated CI for the prediction or
it would not be possible to calculate confidence/prediction
intervals using this method.</p></dd>

    <dt><code>vcov</code></dt>
<dd><p>If regression coefficients are specified, then the variance-covariance
matrix of the coefficients can be specified here to calculate the
associated confidence interval around each prediction. Failure to do
so would result in no confidence intervals being returned. Ensure
`coefficients` and `vcov` have the same positional mapping with the data.</p></dd>

    <dt><code>coeff_cols</code></dt>
<dd><p>If `coefficients` are specified and a one-to-one positional
mapping between the data-columns and coefficient vector is
not present. A character string or numeric index can be specified
here to reorder the data columns and match the corresponding
coefficient value to the respective data column. See the
"Use model coefficients for prediction" section in examples.</p></dd>

    <dt><code>conf.level</code></dt>
<dd><p>The confidence level for calculating confidence/prediction
intervals. Default is 0.95.</p></dd>

    <dt><code>interval</code></dt>
<dd><p>Type of interval to calculate:</p><dl><dt>"none" (default)</dt>
<dd><p>No interval to be calculated.</p></dd>

  <dt>"confidence"</dt>
<dd><p>Calculate a confidence interval.</p></dd>

  <dt>"prediction"</dt>
<dd><p>Calculate a prediction interval.</p></dd>


</dl></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data-frame containing compositional columns with names specified
        in `FG` and `prop` parameters along with any additional columns
        specified in `add_var` parameter and the following columns appended
        at the end.</p><dl><dt>.x</dt>
<dd><p>The x-projection of the points within the ternary.</p></dd>

   <dt>.y</dt>
<dd><p>The y-projection of the points within the ternary.</p></dd>

   <dt>.add_str_ID</dt>
<dd><p>An identifier column for grouping the cartesian product
                      of all additional columns specified in `add_var`
                      parameter (if `add_var` is specified).</p></dd>

   <dt>.Sp</dt>
<dd><p>An identifier column specifying the functional group along
              which the high dimensional simplex is sliced (if there are
              more than 3 groups).</p></dd>

   <dt>.Value</dt>
<dd><p>The value (between 0 and 1) along the direction of functional
                 group in `.Sp` at which the high dimensional simplex is sliced.</p></dd>

   <dt>.Facet</dt>
<dd><p>An identifier column formed by combining `.Sp` and `.value`
                 to group observations within a specific slice of the
                 high dimensional simplex.</p></dd>

   <dt>.Pred</dt>
<dd><p>The predicted response for each observation.
                (if `prediction` is <code>TRUE</code>)</p></dd>

   <dt>.Lower</dt>
<dd><p>The lower limit of the prediction/confidence interval
                 for each observation.</p></dd>

   <dt>.Upper</dt>
<dd><p>The upper limit of the prediction/confidence interval
                 for each observation.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">DImodels</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Fit model</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">response</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="op">(</span><span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">+</span> <span class="va">p3</span> <span class="op">+</span> <span class="va">p4</span> <span class="op">+</span> <span class="va">p5</span> <span class="op">+</span> <span class="va">p6</span> <span class="op">+</span> <span class="va">p7</span> <span class="op">+</span> <span class="va">p8</span> <span class="op">+</span> <span class="va">p9</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>           data <span class="op">=</span> <span class="va">sim3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create data</span></span></span>
<span class="r-in"><span><span class="co">## We have nine (p1 to p9) variables here and using \code{\link{conditional_ternary}}</span></span></span>
<span class="r-in"><span><span class="co">## to visualise the simplex space won't be very helpful as there are too</span></span></span>
<span class="r-in"><span><span class="co">## variables to condition on</span></span></span>
<span class="r-in"><span><span class="co">## Instead we group the nine-variables into three groups called "G", "L" and "H"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">grouped_ternary_data</span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>,</span></span>
<span class="r-in"><span>                          prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"p"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          FG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"L"</span>,<span class="st">"L"</span>,<span class="st">"H"</span>,<span class="st">"H"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          resolution <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The proportional split of species in the groups was not specified in `values`,</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> assuming an equal split for species in each group.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   G         L           H          .x .y p1 p2 p3 p4 p5        p6        p7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 1.0000000 0.000000000 0.000000000  0  0  0  0  0  0 0.5000000 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0.9949749 0.005025126 0.005025126  0  0  0  0  0  0 0.4974874 0.4974874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0.9899497 0.010050251 0.010050251  0  0  0  0  0  0 0.4949749 0.4949749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0.9849246 0.015075377 0.015075377  0  0  0  0  0  0 0.4924623 0.4924623</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0 0.9798995 0.020100503 0.020100503  0  0  0  0  0  0 0.4899497 0.4899497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0 0.9748744 0.025125628 0.025125628  0  0  0  0  0  0 0.4874372 0.4874372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            p8          p9    .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000000000 0.000000000 7.493868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.002512563 0.002512563 7.517016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.005025126 0.005025126 7.540053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.007537688 0.007537688 7.562977</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.010050251 0.010050251 7.585788</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.012562814 0.012562814 7.608488</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## By default the variables within a group take up an equal share of the</span></span></span>
<span class="r-in"><span><span class="co">## group proportion. So for example, each point along the above ternary</span></span></span>
<span class="r-in"><span><span class="co">## would have a 50:50 split of the variables in the group "L" or "H", thus</span></span></span>
<span class="r-in"><span><span class="co">## the vertex where "L" is 1, would mean that p6 and p7 are 0.5 each,</span></span></span>
<span class="r-in"><span><span class="co">## similarly, the vertex "H" is made up of 0.5 of p8 and p9 while the "G"</span></span></span>
<span class="r-in"><span><span class="co">## vertex is comprised of 0.2 of each of p1, p2, p3, p4, and p5. The concepts</span></span></span>
<span class="r-in"><span><span class="co">## also extend to points along the edges and interior of the ternary.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Change the proportional split of species within an FG by using `values`</span></span></span>
<span class="r-in"><span><span class="co">## `values` takes a numeric vector where the position of each element</span></span></span>
<span class="r-in"><span><span class="co">## describes the proportion of the corresponding species within the</span></span></span>
<span class="r-in"><span><span class="co">## corresponding FG</span></span></span>
<span class="r-in"><span><span class="co">## For examples this vector describes, 2-% each of p1, p2, p3, p4 and p5,</span></span></span>
<span class="r-in"><span><span class="co">## in G, 0% and 100% of p6 and p7, respectively in G2 and 30% and 70% of</span></span></span>
<span class="r-in"><span><span class="co">## p8 and p9, respectively in G3.</span></span></span>
<span class="r-in"><span><span class="va">vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>          <span class="fl">0</span>, <span class="fl">1</span>,</span></span>
<span class="r-in"><span>          <span class="fl">0.3</span>, <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">grouped_ternary_data</span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"p"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          FG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"L"</span>,<span class="st">"L"</span>,<span class="st">"H"</span>,<span class="st">"H"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          values <span class="op">=</span> <span class="va">vals</span>,</span></span>
<span class="r-in"><span>                          resolution <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                          model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   G         L           H          .x .y p1 p2 p3 p4 p5 p6        p7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 1.0000000 0.000000000 0.000000000  0  0  0  0  0  0  0 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0.9949749 0.005025126 0.005025126  0  0  0  0  0  0  0 0.9949749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0.9899497 0.010050251 0.010050251  0  0  0  0  0  0  0 0.9899497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0.9849246 0.015075377 0.015075377  0  0  0  0  0  0  0 0.9849246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0 0.9798995 0.020100503 0.020100503  0  0  0  0  0  0  0 0.9798995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0 0.9748744 0.025125628 0.025125628  0  0  0  0  0  0  0 0.9748744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            p8          p9    .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000000000 0.000000000 7.110611</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.001507538 0.003517588 7.135017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.003015075 0.007035176 7.159316</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.004522613 0.010552764 7.183509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.006030151 0.014070352 7.207595</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.007537688 0.017587940 7.231576</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Can also add any additional experimental structures</span></span></span>
<span class="r-in"><span><span class="co">## Notice .add_str_ID in the data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">grouped_ternary_data</span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"p"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          FG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"L"</span>,<span class="st">"L"</span>,<span class="st">"H"</span>,<span class="st">"H"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"treatment"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"50"</span>, <span class="st">"150"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          values <span class="op">=</span> <span class="va">vals</span>,</span></span>
<span class="r-in"><span>                          model <span class="op">=</span> <span class="va">mod</span>,</span></span>
<span class="r-in"><span>                          resolution <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   G         L           H          .x .y p1 p2 p3 p4 p5 p6        p7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 1.0000000 0.000000000 0.000000000  0  0  0  0  0  0  0 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0.9949749 0.005025126 0.005025126  0  0  0  0  0  0  0 0.9949749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0.9899497 0.010050251 0.010050251  0  0  0  0  0  0  0 0.9899497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0.9849246 0.015075377 0.015075377  0  0  0  0  0  0  0 0.9849246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0 0.9798995 0.020100503 0.020100503  0  0  0  0  0  0  0 0.9798995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0 0.9748744 0.025125628 0.025125628  0  0  0  0  0  0  0 0.9748744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            p8          p9 treatment   .add_str_ID    .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000000000 0.000000000        50 treatment: 50 7.110611</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.001507538 0.003517588        50 treatment: 50 7.135017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.003015075 0.007035176        50 treatment: 50 7.159316</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.004522613 0.010552764        50 treatment: 50 7.183509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.006030151 0.014070352        50 treatment: 50 7.207595</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.007537688 0.017587940        50 treatment: 50 7.231576</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## It could be desirable to take the output of this function and add</span></span></span>
<span class="r-in"><span><span class="co">## additional variables to the data before making predictions</span></span></span>
<span class="r-in"><span><span class="co">## Use `prediction = FALSE` to get data without any predictions</span></span></span>
<span class="r-in"><span><span class="va">grouped_data</span> <span class="op">&lt;-</span> <span class="fu">grouped_ternary_data</span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"p"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                     FG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"G"</span>,<span class="st">"L"</span>,<span class="st">"L"</span>,<span class="st">"H"</span>,<span class="st">"H"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                     values <span class="op">=</span> <span class="va">vals</span>,</span></span>
<span class="r-in"><span>                                     resolution <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                     prediction <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-in"><span><span class="va">grouped_data</span><span class="op">$</span><span class="va">treatment</span> <span class="op">&lt;-</span> <span class="fl">250</span></span></span>
<span class="r-in"><span><span class="co"># Add predictions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="add_prediction.html">add_prediction</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">grouped_data</span>, model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   G         L           H          .x .y p1 p2 p3 p4 p5 p6        p7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 1.0000000 0.000000000 0.000000000  0  0  0  0  0  0  0 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0.9949749 0.005025126 0.005025126  0  0  0  0  0  0  0 0.9949749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0.9899497 0.010050251 0.010050251  0  0  0  0  0  0  0 0.9899497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0.9849246 0.015075377 0.015075377  0  0  0  0  0  0  0 0.9849246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0 0.9798995 0.020100503 0.020100503  0  0  0  0  0  0  0 0.9798995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0 0.9748744 0.025125628 0.025125628  0  0  0  0  0  0  0 0.9748744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            p8          p9 treatment    .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000000000 0.000000000       250 7.110611</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.001507538 0.003517588       250 7.135017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.003015075 0.007035176       250 7.159316</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.004522613 0.010552764       250 7.183509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.006030151 0.014070352       250 7.207595</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.007537688 0.017587940       250 7.231576</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rishabh Vishwakarma, Caroline Brophy, Laura Byrne, Catherine Hurley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

