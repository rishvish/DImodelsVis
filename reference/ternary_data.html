<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The data preparation function for creating an equally spaced grid of three
compositional variables (i.e., the three variables sum to 1 at each point
along the grid). The projection of each point in the grid on the x-y plane is
also calculated. This data can be used with a relevant statistical model
to predict the response across the ternary surface. The output of this
function can then be passed to the ternary_plot function to
visualise the change in the response as a contour plot. 
Note: This function works only for models with three compositional
predictors. For models with more than three compositional predictors see
conditional_ternary."><title>Prepare data for showing contours in ternary diagrams. — ternary_data • DImodelsVis</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare data for showing contours in ternary diagrams. — ternary_data"><meta property="og:description" content="The data preparation function for creating an equally spaced grid of three
compositional variables (i.e., the three variables sum to 1 at each point
along the grid). The projection of each point in the grid on the x-y plane is
also calculated. This data can be used with a relevant statistical model
to predict the response across the ternary surface. The output of this
function can then be passed to the ternary_plot function to
visualise the change in the response as a contour plot. 
Note: This function works only for models with three compositional
predictors. For models with more than three compositional predictors see
conditional_ternary."><meta property="og:image" content="https://rishvish.github.io/DImodelsVis/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">DImodelsVis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/DImodelsVis-with-complex-models.html">Using DImodelsVis with regression models not fit using the DImodels package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare data for showing contours in ternary diagrams.</h1>
      
      <div class="d-none name"><code>ternary_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The data preparation function for creating an equally spaced grid of three
compositional variables (i.e., the three variables sum to 1 at each point
along the grid). The projection of each point in the grid on the x-y plane is
also calculated. This data can be used with a relevant statistical model
to predict the response across the ternary surface. The output of this
function can then be passed to the <code><a href="ternary_plot.html">ternary_plot</a></code> function to
visualise the change in the response as a contour plot. <br><em>Note:</em> This function works only for models with three compositional
predictors. For models with more than three compositional predictors see
<code><a href="conditional_ternary.html">conditional_ternary</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ternary_data</span><span class="op">(</span></span>
<span>  prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".P1"</span>, <span class="st">".P2"</span>, <span class="st">".P3"</span><span class="op">)</span>,</span>
<span>  add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  prediction <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>prop</dt>
<dd><p>A character vector specifying the columns names of compositional
variables whose proportions to manipulate. Default is ".P1", ".P2",
and ".P3".</p></dd>


<dt>add_var</dt>
<dd><p>A list specifying values for additional variables
in the model other than the proportions (i.e. not part of the
simplex design).
This could be useful for comparing the predictions across
different values for a non-compositional variable.
One ternary plot will be generated for each unique combination
of values specified here.</p></dd>


<dt>resolution</dt>
<dd><p>A number between 1 and 5 describing the resolution of the
resultant graph.
A high value would result in a higher definition figure
but at the cost of being computationally expensive.</p></dd>


<dt>prediction</dt>
<dd><p>A logical value indicating whether to pass the final data
to the `<a href="add_prediction.html">add_prediction</a>` function and append the
predictions to the data. Default value is <code>TRUE</code>, but
often it would be desirable to make additional changes to
the data before making any predictions, so the user can set this to
<code>FALSE</code> and manually call the `<a href="add_prediction.html">add_prediction</a>`
function.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="add_prediction.html">add_prediction</a></code></p><dl><dt><code>model</code></dt>
<dd><p>A regression model object which will be used to make predictions
for the observations in `data`. Will override `coefficients`
if specified.</p></dd>

    <dt><code>coefficients</code></dt>
<dd><p>If a regression model is not available (or can't be fit in R),
the regression coefficients from a model fit in some other
language can be used to calculate predictions. However, the
user would have to ensure there's an appropriate one-to-one
positional mapping between the data columns and the
coefficient values. Further, the would also have to provide
a variance-covariance matrix of the coefficients in the `vcov`
parameter if they want the associated CI for the prediction or
it would not be possible to calculate confidence/prediction
intervals using this method.</p></dd>

    <dt><code>vcov</code></dt>
<dd><p>If regression coefficients are specified, then the variance-covariance
matrix of the coefficients can be specified here to calculate the
associated confidence interval around each prediction. Failure to do
so would result in no confidence intervals being returned. Ensure
`coefficients` and `vcov` have the same positional mapping with the data.</p></dd>

    <dt><code>coeff_cols</code></dt>
<dd><p>If `coefficients` are specified and a one-to-one positional
mapping between the data-columns and coefficient vector is
not present. A character string or numeric index can be specified
here to reorder the data columns and match the corresponding
coefficient value to the respective data column. See the
"Use model coefficients for prediction" section in examples.</p></dd>

    <dt><code>conf.level</code></dt>
<dd><p>The confidence level for calculating confidence/prediction
intervals. Default is 0.95.</p></dd>

    <dt><code>interval</code></dt>
<dd><p>Type of interval to calculate:</p><dl><dt>"none" (default)</dt>
<dd><p>No interval to be calculated.</p></dd>

  <dt>"confidence"</dt>
<dd><p>Calculate a confidence interval.</p></dd>

  <dt>"prediction"</dt>
<dd><p>Calculate a prediction interval.</p></dd>


</dl></dd>

  
</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data-frame with the following columns and any additional columns
        specified in `add_var` parameter</p>
<p></p>
<dl><dt>.x</dt>
<dd><p>The x component of the x-y projection of the simplex point.</p></dd>

   <dt>.y</dt>
<dd><p>The y component of the x-y projection of the simplex point.</p></dd>

   <dt>.P1</dt>
<dd><p>The first variable whose proportion is varied across the simplex.</p></dd>

   <dt>.P2</dt>
<dd><p>The second variable whose proportion is varied across the simplex.</p></dd>

   <dt>.P3</dt>
<dd><p>The third variable whose proportion is varied across the simplex.</p></dd>

   <dt>.add_str_ID</dt>
<dd><p>An identifier column for grouping the cartesian product
                      of all additional columns specified in `add_var`
                      parameter (if `add_var` is specified).</p></dd>

   <dt>.Pred</dt>
<dd><p>The predicted response for each observation
               (if `prediction` is <code>TRUE</code>).</p></dd>

   <dt>.Lower</dt>
<dd><p>The lower limit of the prediction/confidence interval
                 for each observation.</p></dd>

   <dt>.Upper</dt>
<dd><p>The upper limit of the prediction/confidence interval
                 for each observation.</p></dd>

 
</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">DImodels</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Fit model</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">response</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="op">(</span><span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">+</span> <span class="va">p3</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span>, data <span class="op">=</span> <span class="va">sim0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Preapre data for creating a contour map of predicted response over</span></span></span>
<span class="r-in"><span><span class="co">## the ternary surface</span></span></span>
<span class="r-in"><span><span class="co">## Remember to specify prop with the same character values as the names</span></span></span>
<span class="r-in"><span><span class="co">## of the variables in the model containing the prop.</span></span></span>
<span class="r-in"><span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu">ternary_data</span><span class="op">(</span>resolution <span class="op">=</span> <span class="fl">1</span>, model <span class="op">=</span> <span class="va">mod</span>,</span></span>
<span class="r-in"><span>                          prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Show plot</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ternary_plot.html">ternary_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">plot_data</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="ternary_data-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Can also add any additional variables independent of the simplex using</span></span></span>
<span class="r-in"><span><span class="co">## the `add_var` argument</span></span></span>
<span class="r-in"><span><span class="va">sim0</span><span class="op">$</span><span class="va">treatment</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">new_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">mod</span>, <span class="op">~</span><span class="va">.</span> <span class="op">+</span> <span class="va">treatment</span>, data <span class="op">=</span> <span class="va">sim0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu">ternary_data</span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"treatment"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          resolution <span class="op">=</span> <span class="fl">1</span>, model <span class="op">=</span> <span class="va">new_mod</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Plot to compare between additional variables</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ternary_plot.html">ternary_plot</a></span><span class="op">(</span><span class="va">plot_data</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created all plots.</span>
<span class="r-plt img"><img src="ternary_data-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## It could be desirable to take the output of this function and add</span></span></span>
<span class="r-in"><span><span class="co">## additional variables to the data before making predictions</span></span></span>
<span class="r-in"><span><span class="co">## Use `prediction = FALSE` to get data without any predictions</span></span></span>
<span class="r-in"><span><span class="va">contour_data</span> <span class="op">&lt;-</span> <span class="fu">ternary_data</span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                             model <span class="op">=</span> <span class="va">mod</span>,</span></span>
<span class="r-in"><span>                             prediction <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                             resolution <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">contour_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   p1        p2          p3          .x .y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0 1.0000000 0.000000000 0.000000000  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0 0.9949749 0.005025126 0.005025126  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0 0.9899497 0.010050251 0.010050251  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0 0.9849246 0.015075377 0.015075377  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0 0.9798995 0.020100503 0.020100503  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0 0.9748744 0.025125628 0.025125628  0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Manually add the treatment variable</span></span></span>
<span class="r-in"><span><span class="va">contour_data</span><span class="op">$</span><span class="va">treatment</span> <span class="op">&lt;-</span> <span class="st">"A"</span></span></span>
<span class="r-in"><span><span class="co">## Make predictions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="add_prediction.html">add_prediction</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">contour_data</span>, model <span class="op">=</span> <span class="va">new_mod</span><span class="op">)</span><span class="op">)</span><span class="co">#'</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   p1        p2          p3          .x .y treatment    .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0 1.0000000 0.000000000 0.000000000  0         A 19.16711</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0 0.9949749 0.005025126 0.005025126  0         A 19.38754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0 0.9899497 0.010050251 0.010050251  0         A 19.60556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0 0.9849246 0.015075377 0.015075377  0         A 19.82115</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0 0.9798995 0.020100503 0.020100503  0         A 20.03433</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0 0.9748744 0.025125628 0.025125628  0         A 20.24508</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Manually add the interaction terms</span></span></span>
<span class="r-in"><span><span class="va">contour_data</span> <span class="op">&lt;-</span> <span class="va">contour_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>                  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>`p1:p2` <span class="op">=</span> <span class="va">p1</span><span class="op">*</span><span class="va">p2</span>,</span></span>
<span class="r-in"><span>                         `p2:p3` <span class="op">=</span> <span class="va">p2</span><span class="op">*</span><span class="va">p3</span>,</span></span>
<span class="r-in"><span>                         `p1:p3` <span class="op">=</span> <span class="va">p1</span><span class="op">*</span><span class="va">p3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Add predictions using model coefficients</span></span></span>
<span class="r-in"><span><span class="va">contour_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_prediction.html">add_prediction</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">contour_data</span>,</span></span>
<span class="r-in"><span>                               coefficient <span class="op">=</span> <span class="va">mod</span><span class="op">$</span><span class="va">coefficient</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">contour_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   p1        p2          p3          .x .y treatment p1:p2       p2:p3 p1:p3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0 1.0000000 0.000000000 0.000000000  0         A     0 0.000000000     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0 0.9949749 0.005025126 0.005025126  0         A     0 0.004999874     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0 0.9899497 0.010050251 0.010050251  0         A     0 0.009949244     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0 0.9849246 0.015075377 0.015075377  0         A     0 0.014848110     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0 0.9798995 0.020100503 0.020100503  0         A     0 0.019696472     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0 0.9748744 0.025125628 0.025125628  0         A     0 0.024494331     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 18.61551</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 18.83595</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 19.05396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 19.26956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 19.48273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 19.69349</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Note: Add predictions via coefficients would not give confidence intervals</span></span></span>
<span class="r-in"><span><span class="co">## to get CIs using coefficients we need to specify the variance-covariance</span></span></span>
<span class="r-in"><span><span class="co">## matrix using `vcov`</span></span></span>
<span class="r-in"><span><span class="va">contour_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_prediction.html">add_prediction</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">contour_data</span>,</span></span>
<span class="r-in"><span>                               coefficient <span class="op">=</span> <span class="va">mod</span><span class="op">$</span><span class="va">coefficient</span>,</span></span>
<span class="r-in"><span>                               vcov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                               interval <span class="op">=</span> <span class="st">"confidence"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">contour_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   p1        p2          p3          .x .y treatment p1:p2       p2:p3 p1:p3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0 1.0000000 0.000000000 0.000000000  0         A     0 0.000000000     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0 0.9949749 0.005025126 0.005025126  0         A     0 0.004999874     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0 0.9899497 0.010050251 0.010050251  0         A     0 0.009949244     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0 0.9849246 0.015075377 0.015075377  0         A     0 0.014848110     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0 0.9798995 0.020100503 0.020100503  0         A     0 0.019696472     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0 0.9748744 0.025125628 0.025125628  0         A     0 0.024494331     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      .Pred   .Lower   .Upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 18.61551 17.10673 20.12430</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 18.83595 17.35220 20.31969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 19.05396 17.59460 20.51332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 19.26956 17.83392 20.70519</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 19.48273 18.07015 20.89532</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 19.69349 18.30327 21.08370</span>
<span class="r-in"><span><span class="co">## Show plot</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ternary_plot.html">ternary_plot</a></span><span class="op">(</span><span class="va">contour_data</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="ternary_data-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">## See `?ternary_plot` for options to customise the ternary_plot</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Rishabh Vishwakarma, Caroline Brophy, Laura Byrne, Catherine Hurley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

