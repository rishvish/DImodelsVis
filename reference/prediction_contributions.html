<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Model term contributions to predicted response — prediction_contributions • DImodelsVis</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Model term contributions to predicted response — prediction_contributions"><meta name="description" content="A stacked bar_chart is shown where the individual contributions
(parameter estimate * predictor value) for each term in a statistical model are stacked
on top of another. The total height of the stacked bar gives the value of the
predicted response. The uncertainty around the predicted response can also be shown
on the plot.
This is a wrapper function specifically designed for statistical models fit using the
DI() function from the
DImodels R package and it implicitly
calls prediction_contributions_data followed by
prediction_contributions_plot. If your model object isn't fit using
DImodels, the associated data and plot functions can instead be called manually."><meta property="og:description" content="A stacked bar_chart is shown where the individual contributions
(parameter estimate * predictor value) for each term in a statistical model are stacked
on top of another. The total height of the stacked bar gives the value of the
predicted response. The uncertainty around the predicted response can also be shown
on the plot.
This is a wrapper function specifically designed for statistical models fit using the
DI() function from the
DImodels R package and it implicitly
calls prediction_contributions_data followed by
prediction_contributions_plot. If your model object isn't fit using
DImodels, the associated data and plot functions can instead be called manually."><meta property="og:image" content="https://rishvish.github.io/DImodelsVis/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DImodelsVis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/DImodelsVis-with-complex-models.html">Using DImodelsVis with regression models not fit using the DImodels package</a></li>
    <li><a class="dropdown-item" href="../articles/DImodelsVis-with-DImodelsMulti-models.html">Using DImodelsVis with regression models fit using the `DImodelsMulti` R package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Model term contributions to predicted response</h1>

      <div class="d-none name"><code>prediction_contributions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A stacked bar_chart is shown where the individual contributions
(parameter estimate * predictor value) for each term in a statistical model are stacked
on top of another. The total height of the stacked bar gives the value of the
predicted response. The uncertainty around the predicted response can also be shown
on the plot.
This is a wrapper function specifically designed for statistical models fit using the
<code><a href="https://rdrr.io/pkg/DImodels/man/DI.html" class="external-link">DI()</a></code> function from the
<code><a href="https://rdrr.io/pkg/DImodels/man/DImodels-package.html" class="external-link">DImodels</a></code> R package and it implicitly
calls <code><a href="prediction_contributions_data.html">prediction_contributions_data</a></code> followed by
<code><a href="prediction_contributions_plot.html">prediction_contributions_plot</a></code>. If your model object isn't fit using
DImodels, the associated data and plot functions can instead be called manually.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prediction_contributions</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  conf.level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  bar_labs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>,</span>
<span>  colours <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  FG <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"confidence"</span>, <span class="st">"prediction"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  bar_orientation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vertical"</span>, <span class="st">"horizontal"</span><span class="op">)</span>,</span>
<span>  facet_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nrow <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>A Diversity Interactions model object fit by using the
<code><a href="https://rdrr.io/pkg/DImodels/man/DI.html" class="external-link">DI()</a></code> function from the
<code><a href="https://rdrr.io/pkg/DImodels/man/DImodels-package.html" class="external-link">DImodels</a></code> package.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A user-defined data-frame containing values for compositional variables
along with any additional variables that the user wishes to predict for.
If left blank, a selection of observations (2 from each level of
richness) from the original data used to fit the model would be selected.</p></dd>


<dt id="arg-add-var">add_var<a class="anchor" aria-label="anchor" href="#arg-add-var"></a></dt>
<dd><p>A list specifying values for additional predictor variables
in the model independent of the compositional predictor variables.
This could be useful for comparing the predictions across
different values for a non-compositional variable.
If specified as a list, it will be expanded to show a plot
for each unique combination of values specified, while if specified
as a data-frame, one plot would be generated for each row in the
data and they will be arranged in a grid according to the
value specified in `nrow` and `ncol`.</p></dd>


<dt id="arg-groups">groups<a class="anchor" aria-label="anchor" href="#arg-groups"></a></dt>
<dd><p>A list specifying groupings to arrange coefficients into.
The coefficients within a group will be added together and
shown as a single component on the respective bars in the plot.
This could be useful for grouping multiple similar terms
into a single term for better visibility.</p></dd>


<dt id="arg-conf-level">conf.level<a class="anchor" aria-label="anchor" href="#arg-conf-level"></a></dt>
<dd><p>The confidence level for calculating confidence or
prediction intervals.</p></dd>


<dt id="arg-bar-labs">bar_labs<a class="anchor" aria-label="anchor" href="#arg-bar-labs"></a></dt>
<dd><p>The labels to be shown for each bar in the plot. The user
has three options:
   - By default, the row-names in the data would be used as
     labels for the bars.
   - A character string or numeric index indicating an ID
     column in data.
   - A character vector of same length as the number of rows
     in the data, which manually specifies the names for each bar.
If none of the three options are available, the function would
assign a unique ID for each bar.</p></dd>


<dt id="arg-colours">colours<a class="anchor" aria-label="anchor" href="#arg-colours"></a></dt>
<dd><p>A character vector specifying the colours for the
contributions of the different coefficients.
If not specified, a default colour-scheme would be chosen,
however it might be uninformative in some situations
(for examples when manual groupings are specified using `groups`
parameter).</p></dd>


<dt id="arg-se">se<a class="anchor" aria-label="anchor" href="#arg-se"></a></dt>
<dd><p>A logical value indicating whether to show prediction intervals
for predictions in the plot.</p></dd>


<dt id="arg-fg">FG<a class="anchor" aria-label="anchor" href="#arg-fg"></a></dt>
<dd><p>A higher level grouping for the compositional variables in the
data. Variables belonging to the same group will be assigned with
different shades of the same colour. The user can manually specify
a character vector giving the group each variable belongs to.
If left empty the function will try to get a grouping
from the original <code><a href="https://rdrr.io/pkg/DImodels/man/DI.html" class="external-link">DI</a></code> model object.</p></dd>


<dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p>Type of interval to calculate:</p><dl><dt>"none"</dt>
<dd><p>No interval to be calculated.</p></dd>

  <dt>"confidence" (default)</dt>
<dd><p>Calculate a confidence interval.</p></dd>

  <dt>"prediction"</dt>
<dd><p>Calculate a prediction interval.</p></dd>


</dl></dd>


<dt id="arg-bar-orientation">bar_orientation<a class="anchor" aria-label="anchor" href="#arg-bar-orientation"></a></dt>
<dd><p>One of "vertical" or "horizontal" indicating the
orientation of the bars. Defaults to a vertical
orientation.</p></dd>


<dt id="arg-facet-var">facet_var<a class="anchor" aria-label="anchor" href="#arg-facet-var"></a></dt>
<dd><p>A character string or numeric index identifying the column
in the data to be used for faceting the plot into multiple
panels.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>A boolean variable indicating whether to create the plot or return
the prepared data instead. The default `TRUE` creates the plot while
`FALSE` would return the prepared data for plotting. Could be useful
for if user wants to modify the data first and then call the plotting
function manually.</p></dd>


<dt id="arg-nrow">nrow<a class="anchor" aria-label="anchor" href="#arg-nrow"></a></dt>
<dd><p>Number of rows in which to arrange the final plot
(when `add_var` is specified).</p></dd>


<dt id="arg-ncol">ncol<a class="anchor" aria-label="anchor" href="#arg-ncol"></a></dt>
<dd><p>Number of columns in which to arrange the final plot
(when `add_var` is specified).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggmultiplot (ggplot if single plot is returned) class object or data-frame (if `plot = FALSE`)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#' ## Load DImodels package to fit the model</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">DImodels</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Fit DI model</span></span></span>
<span class="r-in"><span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/DImodels/man/DI.html" class="external-link">DI</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">6</span>, DImodel <span class="op">=</span> <span class="st">'FULL'</span>, data <span class="op">=</span> <span class="va">sim2</span>, y <span class="op">=</span> <span class="st">'response'</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitted model: Separate pairwise interactions 'FULL' DImodel</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create visualisation</span></span></span>
<span class="r-in"><span><span class="co">## If no communities are specified 2 communities at</span></span></span>
<span class="r-in"><span><span class="co">## each level of richness from the original data are used</span></span></span>
<span class="r-in"><span><span class="fu">prediction_contributions</span><span class="op">(</span><span class="va">model1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="prediction_contributions-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Can also manually specify communities of interest</span></span></span>
<span class="r-in"><span><span class="va">my_comms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>p1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>,   <span class="fl">0.5</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">0.25</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       p2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">0.25</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       p3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">0</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">0.25</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       p4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>,   <span class="fl">0.5</span>, <span class="fl">0</span>,   <span class="fl">0.25</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">prediction_contributions</span><span class="op">(</span><span class="va">model1</span>, data <span class="op">=</span> <span class="va">my_comms</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="prediction_contributions-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Group contributions to show as a single component on the plot</span></span></span>
<span class="r-in"><span><span class="fu">prediction_contributions</span><span class="op">(</span><span class="va">model1</span>, data <span class="op">=</span> <span class="va">my_comms</span>,</span></span>
<span class="r-in"><span>                         groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Interactions"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"`p1:p2`"</span>, <span class="st">"`p1:p3`"</span>,</span></span>
<span class="r-in"><span>                                                          <span class="st">"`p1:p4`"</span>, <span class="st">"`p2:p3`"</span>,</span></span>
<span class="r-in"><span>                                                          <span class="st">"`p2:p4`"</span>, <span class="st">"`p3:p4`"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="prediction_contributions-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Add a prediction interval using `se = TRUE` and show bars horizontally</span></span></span>
<span class="r-in"><span><span class="fu">prediction_contributions</span><span class="op">(</span><span class="va">model1</span>, data <span class="op">=</span> <span class="va">my_comms</span>, se <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                         bar_orientation <span class="op">=</span> <span class="st">"horizontal"</span>,</span></span>
<span class="r-in"><span>                         groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Interactions"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"`p1:p2`"</span>, <span class="st">"`p1:p3`"</span>,</span></span>
<span class="r-in"><span>                                                          <span class="st">"`p1:p4`"</span>, <span class="st">"`p2:p3`"</span>,</span></span>
<span class="r-in"><span>                                                          <span class="st">"`p2:p4`"</span>, <span class="st">"`p3:p4`"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="prediction_contributions-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Facet the plot on any variable</span></span></span>
<span class="r-in"><span><span class="va">my_comms</span><span class="op">$</span><span class="va">richness</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Use `facet_var`</span></span></span>
<span class="r-in"><span><span class="fu">prediction_contributions</span><span class="op">(</span><span class="va">model1</span>, data <span class="op">=</span> <span class="va">my_comms</span>, facet_var <span class="op">=</span> <span class="st">"richness"</span>,</span></span>
<span class="r-in"><span>                         bar_orientation <span class="op">=</span> <span class="st">"horizontal"</span>,</span></span>
<span class="r-in"><span>                         groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Interactions"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"`p1:p2`"</span>, <span class="st">"`p1:p3`"</span>,</span></span>
<span class="r-in"><span>                                                          <span class="st">"`p1:p4`"</span>, <span class="st">"`p2:p3`"</span>,</span></span>
<span class="r-in"><span>                                                          <span class="st">"`p2:p4`"</span>, <span class="st">"`p3:p4`"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created plot.</span>
<span class="r-plt img"><img src="prediction_contributions-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Can also add additional variables independent of the simplex design</span></span></span>
<span class="r-in"><span><span class="co">## to get a separate plot for unique combination of the variables</span></span></span>
<span class="r-in"><span><span class="fu">prediction_contributions</span><span class="op">(</span><span class="va">model1</span>, data <span class="op">=</span> <span class="va">my_comms</span>,</span></span>
<span class="r-in"><span>                         add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"block"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                         levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created all plots.</span>
<span class="r-plt img"><img src="prediction_contributions-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Manually specify colours and bar labels</span></span></span>
<span class="r-in"><span><span class="co">## Model has 10 terms but we grouped 6 of them into 1 term,</span></span></span>
<span class="r-in"><span><span class="co">## so we need to specify 5 colours (4 ungrouped terms + 1 grouped term)</span></span></span>
<span class="r-in"><span><span class="co">## Bar labels can be specified using `bar_labs`</span></span></span>
<span class="r-in"><span><span class="co">## Also, using nrow to arrange plots in rows</span></span></span>
<span class="r-in"><span><span class="fu">prediction_contributions</span><span class="op">(</span><span class="va">model1</span>, data <span class="op">=</span> <span class="va">my_comms</span>,</span></span>
<span class="r-in"><span>                         colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"steelblue1"</span>, <span class="st">"steelblue4"</span>,</span></span>
<span class="r-in"><span>                                     <span class="st">"orange"</span>, <span class="st">"orange4"</span>,</span></span>
<span class="r-in"><span>                                     <span class="st">"grey"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         bar_labs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1 Mono"</span>, <span class="st">"p3 Mono"</span>, <span class="st">"1/2 p2 p3"</span>,</span></span>
<span class="r-in"><span>                                      <span class="st">"1/2 p1 p4"</span>, <span class="st">"1/3 p1 p2 p3"</span>, <span class="st">"Centroid"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"block"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                         levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         nrow <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                         groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Interactions"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"`p1:p2`"</span>, <span class="st">"`p1:p3`"</span>,</span></span>
<span class="r-in"><span>                                                          <span class="st">"`p1:p4`"</span>, <span class="st">"`p2:p3`"</span>,</span></span>
<span class="r-in"><span>                                                          <span class="st">"`p2:p4`"</span>, <span class="st">"`p3:p4`"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created all plots.</span>
<span class="r-plt img"><img src="prediction_contributions-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Specify `plot = FALSE` to not create the plot but return the prepared data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">prediction_contributions</span><span class="op">(</span><span class="va">model1</span>, data <span class="op">=</span> <span class="va">my_comms</span>, plot <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                              facet_var <span class="op">=</span> <span class="st">"richness"</span>,</span></span>
<span class="r-in"><span>                              bar_orientation <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 19</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .x_labs .Community     p1    p2    p3    p4 richness .Richness `p1:p2` `p1:p3`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 1       Community 1     1     0     0     0        1         1       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 1       Community 1     1     0     0     0        1         1       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 1       Community 1     1     0     0     0        1         1       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 1       Community 1     1     0     0     0        1         1       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 1       Community 1     1     0     0     0        1         1       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 1       Community 1     1     0     0     0        1         1       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 9 more variables: `p1:p4` &lt;dbl&gt;, `p2:p3` &lt;dbl&gt;, `p2:p4` &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `p3:p4` &lt;dbl&gt;, .Pred &lt;dbl&gt;, .Lower &lt;dbl&gt;, .Upper &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   .Contributions &lt;chr&gt;, .Value &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rishabh Vishwakarma, Caroline Brophy, Laura Byrne, Catherine Hurley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

