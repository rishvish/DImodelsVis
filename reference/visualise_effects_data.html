<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The helper function to create the underlying data for visualising the effect
of increasing or decreasing (or both) the proportion of a variable from a
set of compositional variables. This is a special case of the
simplex_path function where the end points are either the
monoculture (i.e. variable of interest = 1, while all others equal 0) of the
variable of interest (when increasing the proportion) or a community without
the variable of interest (when decreasing the proportion). The observations
specified in `data` are connected to the respective communities (monoculture of
the variable of interest or the community without the variable of interest) by a
straight line across the simplex; This has the effect of changing the proportion of
the variable of interest whilst adjusting the proportion of the other variables
but keeping the ratio of their relative proportions unchanged, thereby preserving
the compositional nature of the data. See examples for more information.
The output of this function can be passed to the
visualise_effects_plot function to visualise the results."><title>Prepare data for effects plots for compositional data — visualise_effects_data • DImodelsVis</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare data for effects plots for compositional data — visualise_effects_data"><meta property="og:description" content="The helper function to create the underlying data for visualising the effect
of increasing or decreasing (or both) the proportion of a variable from a
set of compositional variables. This is a special case of the
simplex_path function where the end points are either the
monoculture (i.e. variable of interest = 1, while all others equal 0) of the
variable of interest (when increasing the proportion) or a community without
the variable of interest (when decreasing the proportion). The observations
specified in `data` are connected to the respective communities (monoculture of
the variable of interest or the community without the variable of interest) by a
straight line across the simplex; This has the effect of changing the proportion of
the variable of interest whilst adjusting the proportion of the other variables
but keeping the ratio of their relative proportions unchanged, thereby preserving
the compositional nature of the data. See examples for more information.
The output of this function can be passed to the
visualise_effects_plot function to visualise the results."><meta property="og:image" content="https://rishvish.github.io/DImodelsVis/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">DImodelsVis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/DImodelsVis-with-complex-models.html">Using DImodelsVis with regression models not fit using the DImodels package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare data for effects plots for compositional data</h1>
      
      <div class="d-none name"><code>visualise_effects_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The helper function to create the underlying data for visualising the effect
of increasing or decreasing (or both) the proportion of a variable from a
set of compositional variables. This is a special case of the
<code><a href="simplex_path.html">simplex_path</a></code> function where the end points are either the
monoculture (i.e. variable of interest = 1, while all others equal 0) of the
variable of interest (when increasing the proportion) or a community without
the variable of interest (when decreasing the proportion). The observations
specified in `data` are connected to the respective communities (monoculture of
the variable of interest or the community without the variable of interest) by a
straight line across the simplex; This has the effect of changing the proportion of
the variable of interest whilst adjusting the proportion of the other variables
but keeping the ratio of their relative proportions unchanged, thereby preserving
the compositional nature of the data. See examples for more information.
The output of this function can be passed to the
<code><a href="visualise_effects_plot.html">visualise_effects_plot</a></code> function to visualise the results.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">visualise_effects_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">prop</span>,</span>
<span>  var_interest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"increase"</span>, <span class="st">"decrease"</span>, <span class="st">"both"</span><span class="op">)</span>,</span>
<span>  add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  prediction <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A dataframe specifying the initial communities of interest for which
to visualise the effect of increasing/decreasing a variable.
If a model object is specified then this data should contain all the
variables present in the model object including any additional variables
not part of the simplex design.
If a coefficient vector is specified then data should contain same number of
columns as the number of elements in the coefficient vector and a one-to-one
positional mapping would be assumed between the data columns and the
elements of the coefficient vector.</p></dd>


<dt>prop</dt>
<dd><p>A vector of column names or indices identifying the columns containing the
variable proportions (i.e., compositional columns) in the data.</p></dd>


<dt>var_interest</dt>
<dd><p>A character vector specifying the variable for which to visualise
the effect of change on the response. If left blank,
all variables would be assumed to be of interest.</p></dd>


<dt>effect</dt>
<dd><p>One of "increase", "decrease" or "both" to indicate whether to
look at the effect of increasing the proportion, decreasing the
proportion or doing both simultaneously, respectively on the response.
The default in "increasing".</p></dd>


<dt>add_var</dt>
<dd><p>A list specifying values for additional variables
in the model other than the proportions (i.e. not part of the simplex design).
This would be useful to compare the predictions across
different values for a categorical variable.
One plot will be generated for each unique combination
of values specified here.</p></dd>


<dt>prediction</dt>
<dd><p>A logical value indicating whether to pass the final data to
`<a href="add_prediction.html">add_prediction</a>` and add predictions to the data.
Default value is <code>TRUE</code>, but often it would be desirable
to make additional changes to the data before making any
predictions, so the user can set this to <code>FALSE</code> and
manually call the `<a href="add_prediction.html">add_prediction</a>` function.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="add_prediction.html">add_prediction</a></code></p><dl><dt><code>model</code></dt>
<dd><p>A regression model object which will be used to make predictions
for the observations in `data`. Will override `coefficients`
if specified.</p></dd>

    <dt><code>coefficients</code></dt>
<dd><p>If a regression model is not available (or can't be fit in R),
the regression coefficients from a model fit in some other
language can be used to calculate predictions. However, the
user would have to ensure there's an appropriate one-to-one
positional mapping between the data columns and the
coefficient values. Further, they would also have to provide
a variance-covariance matrix of the coefficients in the `vcov`
parameter if they want the associated CI for the prediction or
it would not be possible to calculate confidence/prediction
intervals using this method.</p></dd>

    <dt><code>vcov</code></dt>
<dd><p>If regression coefficients are specified, then the variance-covariance
matrix of the coefficients can be specified here to calculate the
associated confidence interval around each prediction. Failure to do
so would result in no confidence intervals being returned. Ensure
`coefficients` and `vcov` have the same positional mapping with the data.</p></dd>

    <dt><code>coeff_cols</code></dt>
<dd><p>If `coefficients` are specified and a one-to-one positional
mapping between the data-columns and coefficient vector is
not present. A character string or numeric index can be specified
here to reorder the data columns and match the corresponding
coefficient value to the respective data column. See the
"Use model coefficients for prediction" section in examples.</p></dd>

    <dt><code>conf.level</code></dt>
<dd><p>The confidence level for calculating confidence/prediction
intervals. Default is 0.95.</p></dd>

    <dt><code>interval</code></dt>
<dd><p>Type of interval to calculate:</p><dl><dt>"none" (default)</dt>
<dd><p>No interval to be calculated.</p></dd>

  <dt>"confidence"</dt>
<dd><p>Calculate a confidence interval.</p></dd>

  <dt>"prediction"</dt>
<dd><p>Calculate a prediction interval.</p></dd>


</dl></dd>

  
</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame with the following columns appended at the end</p>
<p></p>
<dl><dt>.Sp</dt>
<dd><p>An identifier column to discern the variable of interest being
              modified in each curve.</p></dd>

   <dt>.Proportion</dt>
<dd><p>The value of the variable of interest within the community.</p></dd>

   <dt>.Group</dt>
<dd><p>An identifier column to discern between the different curves.</p></dd>

   <dt>.add_str_ID</dt>
<dd><p>An identifier column for grouping the cartesian product
                      of all additional columns specified in `add_var`
                      parameter (if `add_var` is specified).</p></dd>

   <dt>.Pred</dt>
<dd><p>The predicted response for each observation.</p></dd>

   <dt>.Lower</dt>
<dd><p>The lower limit of the prediction/confidence interval for
                 each observation.</p></dd>

   <dt>.Upper</dt>
<dd><p>The upper limit of the prediction/confidence interval for
                 each observation.</p></dd>

   <dt>.Marginal</dt>
<dd><p>The marginal change in the response (first derivative)
                    with respect to the gradual change in the proportion of
                    the species of interest.</p></dd>

   <dt>.Threshold</dt>
<dd><p>A numeric value indicating the maximum proportion of
                     the species of interest within a particular community
                     which has a positive marginal effect on the response.</p></dd>

   <dt>.MarEffect</dt>
<dd><p>A character string entailing whether the increase/decrease
                     of the species of interest from the particular community
                     would result in a positive or negative marginal effect
                     on the response.</p></dd>

   <dt>.Effect</dt>
<dd><p>An identifier column signifying whether considering the
                  effect of species addition or species decrease.</p></dd>

 
</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">DImodels</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Fit model</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">response</span> <span class="op">~</span> <span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">+</span> <span class="va">p3</span> <span class="op">+</span> <span class="va">p4</span> <span class="op">+</span> <span class="fl">0</span>, data <span class="op">=</span> <span class="va">sim1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create data for visualising effect of increasing the proportion of</span></span></span>
<span class="r-in"><span><span class="co">## variable p1 in data</span></span></span>
<span class="r-in"><span><span class="co">## Notice how the proportion of `p1` increases while the proportion of</span></span></span>
<span class="r-in"><span><span class="co">## the other variables decreases whilst maintaining their relative proportions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">visualise_effects_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">sim1</span>, prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            var_interest <span class="op">=</span> <span class="st">"p1"</span>, effect <span class="op">=</span> <span class="st">"increase"</span>,</span></span>
<span class="r-in"><span>                            model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      p1    p2    p3    p4 community block response .Sp .Proportion .Group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.700 0.100 0.100 0.100         1     1   10.815  p1       0.700      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.703 0.099 0.099 0.099         1     1   10.815  p1       0.703      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.706 0.098 0.098 0.098         1     1   10.815  p1       0.706      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.709 0.097 0.097 0.097         1     1   10.815  p1       0.709      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.712 0.096 0.096 0.096         1     1   10.815  p1       0.712      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.715 0.095 0.095 0.095         1     1   10.815  p1       0.715      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      .Pred   .Lower   .Upper .Marginal .Threshold .MarEffect  .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 10.42269 9.789966 11.05541  1.559416      0.826   Negative increase</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 10.42737 9.791585 11.06315  1.559416      0.826   Negative increase</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 10.43204 9.793199 11.07089  1.559416      0.826   Negative increase</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 10.43672 9.794807 11.07864  1.559416      0.826   Negative increase</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 10.44140 9.796410 11.08639  1.559416      0.826   Negative increase</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 10.44608 9.798008 11.09415  1.559416      0.826   Negative increase</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create data for visualising the effect of decreasing the proportion</span></span></span>
<span class="r-in"><span><span class="co">## variable p1 in data using `effect = "decrease"`</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">visualise_effects_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">sim1</span>, prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            var_interest <span class="op">=</span> <span class="st">"p1"</span>, effect <span class="op">=</span> <span class="st">"decrease"</span>,</span></span>
<span class="r-in"><span>                            model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      p1        p2        p3        p4 community block response .Sp .Proportion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.3333333 0.3333333 0.3333333         1     1   10.815  p1       0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.007 0.3310000 0.3310000 0.3310000         1     1   10.815  p1       0.007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.014 0.3286667 0.3286667 0.3286667         1     1   10.815  p1       0.014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.021 0.3263333 0.3263333 0.3263333         1     1   10.815  p1       0.021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.028 0.3240000 0.3240000 0.3240000         1     1   10.815  p1       0.028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.035 0.3216667 0.3216667 0.3216667         1     1   10.815  p1       0.035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .Group    .Pred   .Lower   .Upper .Marginal .Threshold .MarEffect  .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1 9.331096 8.884095 9.778097  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1 9.342012 8.900575 9.783450  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1 9.352928 8.916964 9.788892  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1 9.363844 8.933260 9.794427  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1 9.374760 8.949459 9.800060  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1 9.385676 8.965558 9.805793  1.559416      0.287   Negative decrease</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create data for visualising the effect of increasing and decreasing the</span></span></span>
<span class="r-in"><span><span class="co">## proportion variable p3 in data using `effect = "both"`</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">visualise_effects_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">sim1</span>, prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            var_interest <span class="op">=</span> <span class="st">"p3"</span>, effect <span class="op">=</span> <span class="st">"decrease"</span>,</span></span>
<span class="r-in"><span>                            model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          p1        p2    p3        p4 community block response .Sp .Proportion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.7777778 0.1111111 0.000 0.1111111         1     1   10.815  p3       0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.7770000 0.1110000 0.001 0.1110000         1     1   10.815  p3       0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.7762222 0.1108889 0.002 0.1108889         1     1   10.815  p3       0.002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.7754444 0.1107778 0.003 0.1107778         1     1   10.815  p3       0.003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.7746667 0.1106667 0.004 0.1106667         1     1   10.815  p3       0.004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.7738889 0.1105556 0.005 0.1105556         1     1   10.815  p3       0.005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .Group    .Pred   .Lower   .Upper  .Marginal .Threshold .MarEffect  .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1 10.51542 9.795624 11.23522 -0.9273268      0.066   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1 10.51449 9.795636 11.23335 -0.9273268      0.066   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1 10.51357 9.795646 11.23148 -0.9273268      0.066   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1 10.51264 9.795656 11.22962 -0.9273268      0.066   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1 10.51171 9.795664 11.22776 -0.9273268      0.066   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1 10.51078 9.795671 11.22590 -0.9273268      0.066   Negative decrease</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Getting prediction intervals at a 99% confidence level</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">visualise_effects_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">sim1</span>, prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            var_interest <span class="op">=</span> <span class="st">"p1"</span>, effect <span class="op">=</span> <span class="st">"decrease"</span>,</span></span>
<span class="r-in"><span>                            model <span class="op">=</span> <span class="va">mod</span>, conf.level <span class="op">=</span> <span class="fl">0.99</span>,</span></span>
<span class="r-in"><span>                            interval <span class="op">=</span> <span class="st">"prediction"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      p1        p2        p3        p4 community block response .Sp .Proportion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.3333333 0.3333333 0.3333333         1     1   10.815  p1       0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.007 0.3310000 0.3310000 0.3310000         1     1   10.815  p1       0.007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.014 0.3286667 0.3286667 0.3286667         1     1   10.815  p1       0.014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.021 0.3263333 0.3263333 0.3263333         1     1   10.815  p1       0.021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.028 0.3240000 0.3240000 0.3240000         1     1   10.815  p1       0.028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.035 0.3216667 0.3216667 0.3216667         1     1   10.815  p1       0.035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .Group    .Pred   .Lower   .Upper .Marginal .Threshold .MarEffect  .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1 9.331096 5.855633 12.80656  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1 9.342012 5.867809 12.81621  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1 9.352928 5.879950 12.82591  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1 9.363844 5.892055 12.83563  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1 9.374760 5.904125 12.84539  1.559416      0.287   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1 9.385676 5.916160 12.85519  1.559416      0.287   Negative decrease</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Adding additional variables to the data using `add_var`</span></span></span>
<span class="r-in"><span><span class="co">## Notice the new .add_str_ID column in the output</span></span></span>
<span class="r-in"><span><span class="va">sim1</span><span class="op">$</span><span class="va">block</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">sim1</span><span class="op">$</span><span class="va">block</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">new_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">mod</span>, <span class="op">~</span> <span class="va">.</span> <span class="op">+</span> <span class="va">block</span>, data <span class="op">=</span> <span class="va">sim1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">visualise_effects_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">sim1</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            var_interest <span class="op">=</span> <span class="st">"p1"</span>, effect <span class="op">=</span> <span class="st">"both"</span>,</span></span>
<span class="r-in"><span>                            model <span class="op">=</span> <span class="va">new_mod</span>,</span></span>
<span class="r-in"><span>                            add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"block"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      p1        p2        p3        p4 block .add_str_ID .Sp .Proportion .Group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.3333333 0.3333333 0.3333333     1    block: 1  p1       0.000      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.014 0.3286667 0.3286667 0.3286667     1    block: 1  p1       0.014      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.028 0.3240000 0.3240000 0.3240000     1    block: 1  p1       0.028      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.042 0.3193333 0.3193333 0.3193333     1    block: 1  p1       0.042      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.056 0.3146667 0.3146667 0.3146667     1    block: 1  p1       0.056      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.070 0.3100000 0.3100000 0.3100000     1    block: 1  p1       0.070      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      .Pred   .Lower   .Upper .Marginal .Threshold .MarEffect .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 9.847626 9.241980 10.45327  1.559416      0.946   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 9.869458 9.271266 10.46765  1.559416      0.946   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 9.891290 9.300209 10.48237  1.559416      0.946   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 9.913122 9.328796 10.49745  1.559416      0.946   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 9.934953 9.357015 10.51289  1.559416      0.946   Negative    both</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 9.956785 9.384853 10.52872  1.559416      0.946   Negative    both</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create data for visualising effect of decreasing variable p2 from</span></span></span>
<span class="r-in"><span><span class="co">## the original communities in the data but using model coefficients</span></span></span>
<span class="r-in"><span><span class="co">## When specifying coefficients the data should have a one-to-one</span></span></span>
<span class="r-in"><span><span class="co">## positional mapping with specified coefficients.</span></span></span>
<span class="r-in"><span><span class="va">init_comms</span> <span class="op">&lt;-</span> <span class="va">sim1</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">visualise_effects_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">init_comms</span>, prop <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span></span>
<span class="r-in"><span>                            var_interest <span class="op">=</span> <span class="st">"p2"</span>,</span></span>
<span class="r-in"><span>                            effect <span class="op">=</span> <span class="st">"decrease"</span>,</span></span>
<span class="r-in"><span>                            interval <span class="op">=</span> <span class="st">"none"</span>,</span></span>
<span class="r-in"><span>                            coefficients <span class="op">=</span> <span class="va">mod</span><span class="op">$</span><span class="va">coefficients</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          p1    p2        p3        p4 .Sp .Proportion .Group    .Pred .Marginal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.7777778 0.000 0.1111111 0.1111111  p2       0.000      1 10.41016 0.1252706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.7770000 0.001 0.1110000 0.1110000  p2       0.001      1 10.41029 0.1252706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.7762222 0.002 0.1108889 0.1108889  p2       0.002      1 10.41041 0.1252706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.7754444 0.003 0.1107778 0.1107778  p2       0.003      1 10.41054 0.1252706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.7746667 0.004 0.1106667 0.1106667  p2       0.004      1 10.41066 0.1252706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.7738889 0.005 0.1105556 0.1105556  p2       0.005      1 10.41079 0.1252706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .Threshold .MarEffect  .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      0.067   Negative decrease</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Note that to get confidence interval when specifying</span></span></span>
<span class="r-in"><span><span class="co">## model coefficients we'd also need to provide a variance covariance</span></span></span>
<span class="r-in"><span><span class="co">## matrix using the `vcov` argument</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">visualise_effects_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">init_comms</span>, prop <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span></span>
<span class="r-in"><span>                            var_interest <span class="op">=</span> <span class="st">"p2"</span>,</span></span>
<span class="r-in"><span>                            effect <span class="op">=</span> <span class="st">"decrease"</span>,</span></span>
<span class="r-in"><span>                            interval <span class="op">=</span> <span class="st">"confidence"</span>,</span></span>
<span class="r-in"><span>                            coefficients <span class="op">=</span> <span class="va">mod</span><span class="op">$</span><span class="va">coefficients</span>,</span></span>
<span class="r-in"><span>                            vcov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          p1    p2        p3        p4 .Sp .Proportion .Group    .Pred   .Lower</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.7777778 0.000 0.1111111 0.1111111  p2       0.000      1 10.41016 9.705914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.7770000 0.001 0.1110000 0.1110000  p2       0.001      1 10.41029 9.706958</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.7762222 0.002 0.1108889 0.1108889  p2       0.002      1 10.41041 9.708001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.7754444 0.003 0.1107778 0.1107778  p2       0.003      1 10.41054 9.709043</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.7746667 0.004 0.1106667 0.1106667  p2       0.004      1 10.41066 9.710084</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.7738889 0.005 0.1105556 0.1105556  p2       0.005      1 10.41079 9.711123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     .Upper .Marginal .Threshold .MarEffect  .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 11.11441 0.1252706      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 11.11361 0.1252706      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 11.11282 0.1252706      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 11.11203 0.1252706      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 11.11124 0.1252706      0.067   Negative decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 11.11045 0.1252706      0.067   Negative decrease</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Can also create only the intermediary communities without predictions</span></span></span>
<span class="r-in"><span><span class="co">## by specifying prediction = FALSE.</span></span></span>
<span class="r-in"><span><span class="co">## Any additional columns can then be added and the `add_prediction` function</span></span></span>
<span class="r-in"><span><span class="co">## can be manually called.</span></span></span>
<span class="r-in"><span><span class="co">## Note: If calling the `add_prediction` function manually, the data would</span></span></span>
<span class="r-in"><span><span class="co">## not contain information about the marginal effect of changing the species</span></span></span>
<span class="r-in"><span><span class="co">## interest</span></span></span>
<span class="r-in"><span><span class="va">effects_data</span> <span class="op">&lt;-</span> <span class="fu">visualise_effects_data</span><span class="op">(</span>data <span class="op">=</span> <span class="va">init_comms</span>, prop <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span></span>
<span class="r-in"><span>                                       var_interest <span class="op">=</span> <span class="st">"p2"</span>,</span></span>
<span class="r-in"><span>                                       effect <span class="op">=</span> <span class="st">"decrease"</span>,</span></span>
<span class="r-in"><span>                                       prediction <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">effects_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          p1    p2        p3        p4 .Sp .Proportion .Group  .Effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.7777778 0.000 0.1111111 0.1111111  p2       0.000      1 decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.7770000 0.001 0.1110000 0.1110000  p2       0.001      1 decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.7762222 0.002 0.1108889 0.1108889  p2       0.002      1 decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.7754444 0.003 0.1107778 0.1107778  p2       0.003      1 decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.7746667 0.004 0.1106667 0.1106667  p2       0.004      1 decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.7738889 0.005 0.1105556 0.1105556  p2       0.005      1 decrease</span>
<span class="r-in"><span><span class="co">## Prediction using model object</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="add_prediction.html">add_prediction</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">effects_data</span>, model <span class="op">=</span> <span class="va">mod</span>, interval <span class="op">=</span> <span class="st">"prediction"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          p1    p2        p3        p4 .Sp .Proportion .Group  .Effect    .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.7777778 0.000 0.1111111 0.1111111  p2       0.000      1 decrease 10.41016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.7770000 0.001 0.1110000 0.1110000  p2       0.001      1 decrease 10.41029</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.7762222 0.002 0.1108889 0.1108889  p2       0.002      1 decrease 10.41041</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.7754444 0.003 0.1107778 0.1107778  p2       0.003      1 decrease 10.41054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.7746667 0.004 0.1106667 0.1106667  p2       0.004      1 decrease 10.41066</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.7738889 0.005 0.1105556 0.1105556  p2       0.005      1 decrease 10.41079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     .Lower   .Upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 7.738930 13.08139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 7.739308 13.08126</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 7.739686 13.08114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 7.740062 13.08101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 7.740439 13.08088</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 7.740814 13.08076</span>
<span class="r-in"><span><span class="co">## Prediction using regression coefficients</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="add_prediction.html">add_prediction</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">effects_data</span>, coefficients <span class="op">=</span> <span class="va">mod</span><span class="op">$</span><span class="va">coefficients</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          p1    p2        p3        p4 .Sp .Proportion .Group  .Effect    .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.7777778 0.000 0.1111111 0.1111111  p2       0.000      1 decrease 10.41016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.7770000 0.001 0.1110000 0.1110000  p2       0.001      1 decrease 10.41029</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.7762222 0.002 0.1108889 0.1108889  p2       0.002      1 decrease 10.41041</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.7754444 0.003 0.1107778 0.1107778  p2       0.003      1 decrease 10.41054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.7746667 0.004 0.1106667 0.1106667  p2       0.004      1 decrease 10.41066</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.7738889 0.005 0.1105556 0.1105556  p2       0.005      1 decrease 10.41079</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Rishabh Vishwakarma, Caroline Brophy, Laura Byrne, Catherine Hurley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

