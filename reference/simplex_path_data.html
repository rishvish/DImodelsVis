<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creating data for visualising the change in a response variable between two points in the simplex space — simplex_path_data • DImodelsVis</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating data for visualising the change in a response variable between two points in the simplex space — simplex_path_data"><meta name="description" content="This is the helper function to prepare the underlying data for visualising
the change in a response variable between two points in a simplex space. The
two points specified by the `starts` and `ends` parameters are joined by a
straight line across the simplex space and the response is predicted for the
starting, ending and intermediate communities along this line. The associated
uncertainty along this prediction is also returned. The output of this function
can be passed to the simplex_path_plot function to visualise the
change in response."><meta property="og:description" content="This is the helper function to prepare the underlying data for visualising
the change in a response variable between two points in a simplex space. The
two points specified by the `starts` and `ends` parameters are joined by a
straight line across the simplex space and the response is predicted for the
starting, ending and intermediate communities along this line. The associated
uncertainty along this prediction is also returned. The output of this function
can be passed to the simplex_path_plot function to visualise the
change in response."><meta property="og:image" content="https://rishvish.github.io/DImodelsVis/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DImodelsVis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/DImodelsVis-with-complex-models.html">Using DImodelsVis with regression models not fit using the DImodels package</a></li>
    <li><a class="dropdown-item" href="../articles/DImodelsVis-with-DImodelsMulti-models.html">Using DImodelsVis with regression models fit using the `DImodelsMulti` R package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Creating data for visualising the change in a response variable between two points in the simplex space</h1>

      <div class="d-none name"><code>simplex_path_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the helper function to prepare the underlying data for visualising
the change in a response variable between two points in a simplex space. The
two points specified by the `starts` and `ends` parameters are joined by a
straight line across the simplex space and the response is predicted for the
starting, ending and intermediate communities along this line. The associated
uncertainty along this prediction is also returned. The output of this function
can be passed to the <code><a href="simplex_path_plot.html">simplex_path_plot</a></code> function to visualise the
change in response.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simplex_path_data</span><span class="op">(</span><span class="va">starts</span>, <span class="va">ends</span>, <span class="va">prop</span>, add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, prediction <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-starts">starts<a class="anchor" aria-label="anchor" href="#arg-starts"></a></dt>
<dd><p>A data-frame specifying the starting proportions of the
compositional variables.
If a model object is specified then this data should contain all the
variables present in the model object including any additional non-compositional variables.
If a coefficient vector is specified then data should contain same number of
columns as the number of elements in the coefficient vector and a one-to-one
positional mapping would be assumed between the data columns and the
elements of the coefficient vector.</p></dd>


<dt id="arg-ends">ends<a class="anchor" aria-label="anchor" href="#arg-ends"></a></dt>
<dd><p>A data-frame specifying the ending proportions of the
compositional variables.
If a model object is specified then this data should contain all the
variables present in the model object including any additional non-compositional variables.
If a coefficient vector is specified then data should contain same number of
columns as the number of elements in the coefficient vector and a one-to-one
positional mapping would be assumed between the data columns and the
elements of the coefficient vector.</p></dd>


<dt id="arg-prop">prop<a class="anchor" aria-label="anchor" href="#arg-prop"></a></dt>
<dd><p>A vector of column names identifying the columns containing the
variable proportions (i.e., compositional columns) in the data.</p></dd>


<dt id="arg-add-var">add_var<a class="anchor" aria-label="anchor" href="#arg-add-var"></a></dt>
<dd><p>A list or data-frame specifying values for additional variables
in the model other than the proportions (i.e. not part of the
simplex design).
This could be useful for comparing the predictions across
different values for a non-compositional variable.
If specified as a list, it will be expanded to show a plot
for each unique combination of values specified, while if specified
as a data-frame, one plot would be generated for each row in the
data.</p></dd>


<dt id="arg-prediction">prediction<a class="anchor" aria-label="anchor" href="#arg-prediction"></a></dt>
<dd><p>A logical value indicating whether to pass the final data
to the `<a href="add_prediction.html">add_prediction</a>` function and append the
predictions to the data. Default value is <code>TRUE</code>, but
often it would be desirable to make additional changes to
the data before making any predictions, so the user can set this to
<code>FALSE</code> and manually call the `<a href="add_prediction.html">add_prediction</a>`
function.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="add_prediction.html">add_prediction</a></code></p><dl><dt><code>model</code></dt>
<dd><p>A regression model object which will be used to make predictions
for the observations in `data`. Will override `coefficients`
if specified.</p></dd>

    <dt><code>coefficients</code></dt>
<dd><p>If a regression model is not available (or can't be fit in R),
the regression coefficients from a model fit in some other
language can be used to calculate predictions. However, the
user would have to ensure there's an appropriate one-to-one
positional mapping between the data columns and the
coefficient values. Further, they would also have to provide
a variance-covariance matrix of the coefficients in the `vcov`
parameter if they want the associated CI for the prediction or
it would not be possible to calculate confidence/prediction
intervals using this method.</p></dd>

    <dt><code>vcov</code></dt>
<dd><p>If regression coefficients are specified, then the variance-covariance
matrix of the coefficients can be specified here to calculate the
associated confidence interval around each prediction. Failure to do
so would result in no confidence intervals being returned. Ensure
`coefficients` and `vcov` have the same positional mapping with the data.</p></dd>

    <dt><code>coeff_cols</code></dt>
<dd><p>If `coefficients` are specified and a one-to-one positional
mapping between the data-columns and coefficient vector is
not present. A character string or numeric index can be specified
here to reorder the data columns and match the corresponding
coefficient value to the respective data column. See the
"Use model coefficients for prediction" section in examples.</p></dd>

    <dt><code>conf.level</code></dt>
<dd><p>The confidence level for calculating confidence/prediction
intervals. Default is 0.95.</p></dd>

    <dt><code>interval</code></dt>
<dd><p>Type of interval to calculate:</p><dl><dt>"none" (default)</dt>
<dd><p>No interval to be calculated.</p></dd>

  <dt>"confidence"</dt>
<dd><p>Calculate a confidence interval.</p></dd>

  <dt>"prediction"</dt>
<dd><p>Calculate a prediction interval.</p></dd>


</dl></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with the following columns appended at the end</p><dl><dt>.InterpConst</dt>
<dd><p>The value of the interpolation constant for creating
                       the intermediate compositions between the start and end compositions.</p></dd>

   <dt>.Group</dt>
<dd><p>An identifier column to discern between the different curves.</p></dd>

   <dt>.add_str_ID</dt>
<dd><p>An identifier column for grouping the cartesian product
                      of all additional columns specified in `add_var`
                      parameter (if `add_var` is specified).</p></dd>

   <dt>.Pred</dt>
<dd><p>The predicted response for each observation.</p></dd>

   <dt>.Lower</dt>
<dd><p>The lower limit of the prediction/confidence interval for each observation.</p></dd>

   <dt>.Upper</dt>
<dd><p>The upper limit of the prediction/confidence interval for each observation.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">DImodels</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Fit model</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">response</span> <span class="op">~</span> <span class="op">(</span><span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">+</span> <span class="va">p3</span> <span class="op">+</span> <span class="va">p4</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">0</span>, data <span class="op">=</span> <span class="va">sim2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create data for visualising change in response as we move from</span></span></span>
<span class="r-in"><span><span class="co">## a species dominated by 70% of one species to a monoculture of</span></span></span>
<span class="r-in"><span><span class="co">## same species</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">simplex_path_data</span><span class="op">(</span>starts <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">9</span>, <span class="fl">13</span><span class="op">)</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       ends <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">52</span>, <span class="fl">56</span>, <span class="fl">60</span><span class="op">)</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      p1    p2    p3    p4 .InterpConst .Group    .Pred   .Lower   .Upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.700 0.100 0.100 0.100         0.00      1 18.42849 17.58232 19.27465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.703 0.099 0.099 0.099         0.01      1 18.37345 17.52663 19.22027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.706 0.098 0.098 0.098         0.02      1 18.31797 17.47045 19.16548</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.709 0.097 0.097 0.097         0.03      1 18.26203 17.41378 19.11028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.712 0.096 0.096 0.096         0.04      1 18.20565 17.35661 19.05468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.715 0.095 0.095 0.095         0.05      1 18.14881 17.29895 18.99868</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create data for visualising change in response as we move from</span></span></span>
<span class="r-in"><span><span class="co">## the centroid mixture to each monoculture</span></span></span>
<span class="r-in"><span><span class="co">## If either of starts or ends have only row, then they'll be recycled</span></span></span>
<span class="r-in"><span><span class="co">## to match the number of rows in the other</span></span></span>
<span class="r-in"><span><span class="co">## Notice starts has only one row here, but will be recycled to have 4</span></span></span>
<span class="r-in"><span><span class="co">## since ends has 4 four rows</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">simplex_path_data</span><span class="op">(</span>starts <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span><span class="op">)</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       ends <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">52</span>, <span class="fl">56</span>, <span class="fl">60</span><span class="op">)</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       p1     p2     p3     p4 .InterpConst .Group    .Pred   .Lower   .Upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.2500 0.2500 0.2500 0.2500         0.00      1 21.59188 20.99819 22.18557</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.2575 0.2475 0.2475 0.2475         0.01      1 21.62206 21.02781 22.21630</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.2650 0.2450 0.2450 0.2450         0.02      1 21.64942 21.05356 22.24528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.2725 0.2425 0.2425 0.2425         0.03      1 21.67397 21.07553 22.27242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.2800 0.2400 0.2400 0.2400         0.04      1 21.69572 21.09380 22.29763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.2875 0.2375 0.2375 0.2375         0.05      1 21.71465 21.10848 22.32082</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Changing the confidence level for the prediction interval</span></span></span>
<span class="r-in"><span><span class="co">## Use `conf.level` parameter</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">simplex_path_data</span><span class="op">(</span>starts <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span><span class="op">)</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       ends <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">52</span>, <span class="fl">56</span>, <span class="fl">60</span><span class="op">)</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       model <span class="op">=</span> <span class="va">mod</span>, conf.level <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       p1     p2     p3     p4 .InterpConst .Group    .Pred   .Lower   .Upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.2500 0.2500 0.2500 0.2500         0.00      1 21.59188 20.80038 22.38338</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.2575 0.2475 0.2475 0.2475         0.01      1 21.62206 20.82981 22.41430</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.2650 0.2450 0.2450 0.2450         0.02      1 21.64942 20.85502 22.44382</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.2725 0.2425 0.2425 0.2425         0.03      1 21.67397 20.87613 22.47182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.2800 0.2400 0.2400 0.2400         0.04      1 21.69572 20.89325 22.49818</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.2875 0.2375 0.2375 0.2375         0.05      1 21.71465 20.90651 22.52279</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Adding additional variables to the data using `add_var`</span></span></span>
<span class="r-in"><span><span class="co">## Notice the new .add_str_ID column in the output</span></span></span>
<span class="r-in"><span><span class="va">sim2</span><span class="op">$</span><span class="va">block</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">sim2</span><span class="op">$</span><span class="va">block</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">new_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">mod</span>, <span class="op">~</span> <span class="va">.</span> <span class="op">+</span> <span class="va">block</span>, data <span class="op">=</span> <span class="va">sim2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">simplex_path_data</span><span class="op">(</span>starts <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span><span class="op">)</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       ends <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">52</span>, <span class="fl">56</span>, <span class="fl">60</span><span class="op">)</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       model <span class="op">=</span> <span class="va">new_mod</span>, conf.level <span class="op">=</span> <span class="fl">0.99</span>,</span></span>
<span class="r-in"><span>                       add_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"block"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       p1     p2     p3     p4 .InterpConst .Group block .add_str_ID    .Pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.2500 0.2500 0.2500 0.2500         0.00      1     1    block: 1 22.27542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.2575 0.2475 0.2475 0.2475         0.01      1     1    block: 1 22.30560</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.2650 0.2450 0.2450 0.2450         0.02      1     1    block: 1 22.33296</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.2725 0.2425 0.2425 0.2425         0.03      1     1    block: 1 22.35751</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.2800 0.2400 0.2400 0.2400         0.04      1     1    block: 1 22.37926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.2875 0.2375 0.2375 0.2375         0.05      1     1    block: 1 22.39819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     .Lower   .Upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 21.27206 23.27879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 21.30171 23.30948</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 21.32756 23.33836</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 21.34970 23.36533</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 21.36819 23.39032</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 21.38312 23.41326</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Use predict = FALSE to get raw data structure</span></span></span>
<span class="r-in"><span><span class="va">out_data</span> <span class="op">&lt;-</span> <span class="fu">simplex_path_data</span><span class="op">(</span>starts <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span><span class="op">)</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                              ends <span class="op">=</span> <span class="va">sim2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">52</span>, <span class="fl">56</span>, <span class="fl">60</span><span class="op">)</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                              prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              model <span class="op">=</span> <span class="va">new_mod</span>,</span></span>
<span class="r-in"><span>                              prediction <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished data preparation.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       p1     p2     p3     p4 .InterpConst .Group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.2500 0.2500 0.2500 0.2500         0.00      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.2575 0.2475 0.2475 0.2475         0.01      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.2650 0.2450 0.2450 0.2450         0.02      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.2725 0.2425 0.2425 0.2425         0.03      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.2800 0.2400 0.2400 0.2400         0.04      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.2875 0.2375 0.2375 0.2375         0.05      1</span>
<span class="r-in"><span><span class="co">## Manually add block</span></span></span>
<span class="r-in"><span><span class="va">out_data</span><span class="op">$</span><span class="va">block</span> <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="co">## Call `add_prediction` to get prediction</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="add_prediction.html">add_prediction</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">out_data</span>, model <span class="op">=</span> <span class="va">new_mod</span>, interval <span class="op">=</span> <span class="st">"conf"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       p1     p2     p3     p4 .InterpConst .Group block    .Pred   .Lower</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.2500 0.2500 0.2500 0.2500         0.00      1     3 21.36404 20.78032</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.2575 0.2475 0.2475 0.2475         0.01      1     3 21.39421 20.80999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.2650 0.2450 0.2450 0.2450         0.02      1     3 21.42157 20.83590</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.2725 0.2425 0.2425 0.2425         0.03      1     3 21.44613 20.85812</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.2800 0.2400 0.2400 0.2400         0.04      1     3 21.46787 20.87674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.2875 0.2375 0.2375 0.2375         0.05      1     3 21.48680 20.89183</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     .Upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 21.94775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 21.97843</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 22.00725</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 22.03413</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 22.05900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 22.08178</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rishabh Vishwakarma, Caroline Brophy, Laura Byrne, Catherine Hurley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

